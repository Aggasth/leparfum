<!DOCTYPE html>
<html lang="en">
<head>
    <%- include ('../modules/head.ejs') %>
</head>
<body>
    <div class="row">
        <div class="col-2">
            <%- include ('../modules/sidebar.ejs') %>
        </div>
        <div class="col-10">
            <div class="row">
                <div class="col-12">
                    <div class="d-block justify-content-start text-start h-100 pt-5 me-3">
                        <p class="fs-4 fw-semibold border-bottom">Administración de suscripciones</p>
                    </div>
                </div>
                <div class="col-12">
                    <div class="row">
                        <div class="col-6">
                            <div class="row">
                                <div class="col-12 mb-2 rounded-2 border" style="background-color: rgb(241, 241, 241);">
                                    
                                    <p class="fs-5 pt-2 pb-0 ps-3">Generar orden de envio</p>
                                    <div class="form-text pb-3 ps-3">Solo se cargarán los usuarios que tengan pendiente el envío del producto según su suscripción.</div>
                                    <form class="row pb-3 m-2" action="" >
                                        <div class="col-6">
                                            <select class="form-select" name="selectUser" id="selectUser">
                                                <!-- Debe mostrar solo usuarios con suscripción activa -->
                                                <option value="" selected disabled hidden>Seleccione un cliente</option>
                                            </select>
                                        </div>
                                        <div class="col-6 ps-5 pe-5">
                                            <input class="form-control text-center" name="lastDateInput" id="lastDate" placeholder="14-11-2023" type="text" readonly>
                                            <div class="form-text text-center">Última entrega</div>
                                            <!-- Imprimir el ultimo envío realizado -->
                                        </div>
                                        <div class="col-6">
                                            <select class="form-select" name="productListSelect" id="productList">
                                                <option value="" selected disabled hidden>Seleccione un producto</option>
                                                <!-- Se debe rellenar con los productos de 15Ml que correspondan a los tags de preferencia -->
                                            </select>
                                        </div>
                                        <div class="col-6 ps-5 pe-5">
                                            <input class="form-control text-center" name="lastDateInput" id="lastDate" placeholder="Luxueux" type="text" readonly>
                                            <div class="form-text text-center">Suscripción</div>
                                            <!-- Mostrar información sobre la suscripción del usuario -->
                                            <!-- Puedes agregar un nuevo elemento aquí para mostrar el estado de la suscripción -->
                                            <div id="suscripcionInfo"></div>
                                        </div>
                                        <div class="col-12 pt-2">
                                            <textarea class="form-control" name="commentArea" id="commentText" placeholder="Comentarios sobre el envío: Producto - Cantidad - Descripción" rows="5"></textarea>
                                        </div>
                                        <div class="col-6"></div>
                                        <div class="col-6 pt-2">
                                            <button class="btn btn-success w-100" id="btnGenerar" type="submit">Generar</button>
                                        </div>
                                    </form>
                                </div>

                                

                                <div class="col-12">
                                    
                                </div>
                            </div>
                        </div>
                        <div class="col-6">
                            <div class="row">
                                <div class="col-12 text-end p-3 me-5">
                                   <form id="pdfForm" action="/generarPDFUsuariosSuscritos" method="GET">
                                        <button type="submit" class="btn btn-primary">Descargar PDF Suscripciones</button>
                                    </form> 
                                </div>
                            </div>
                            
                            <table id="subsTable" class="table table-striped text-center">
                                <thead>
                                    <tr>
                                        <th scope="col">Cliente</th>
                                        <th scope="col">Dirección</th>
                                        <th scope="col">Celular</th>
                                        <th scope="col">Suscripcion</th>
                                    </tr>
                                </thead>
                                <tbody>
                                    <!-- Que se rellene con los datos del usuario solicitados arriba. -->
                                </tbody>
                            </table>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script src="../public/subs-load.js"></script>

</body>
</html>
